{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Управление справочниками</title>
        <link rel="stylesheet"
              href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    </head>
    <body>
        <div class="container mt-4">
            <h1>Управление справочниками</h1>
            <a href="{% url 'records_list' %}" class="btn btn-secondary mb-3">← Назад</a>
            <div class="row g-4">
                <!-- Статусы -->
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-light">
                            <strong>Статусы</strong>
                        </div>
                        <div class="card-body">
                            <form method="post" class="mb-3">
                                {% csrf_token %}
                                {{ status_form.name }}
                                <input type="hidden" name="form_type" value="status">
                                <button class="btn btn-success btn-sm">Добавить</button>
                            </form>
                            <ul class="list-group">
                                {% for s in statuses %}
                                    <li class="list-group-item d-flex justify-content-between align-items-center">{{ s.name }}</li>
                                {% empty %}
                                    <li class="list-group-item text-muted">Нет статусов</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- Типы -->
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-light">
                            <strong>Типы</strong>
                        </div>
                        <div class="card-body">
                            <form method="post" class="mb-3">
                                {% csrf_token %}
                                {{ type_form.name }}
                                <input type="hidden" name="form_type" value="type">
                                <button class="btn btn-success btn-sm">Добавить</button>
                            </form>
                            <ul class="list-group">
                                {% for t in types %}
                                    <li class="list-group-item d-flex justify-content-between align-items-center">{{ t.name }}</li>
                                {% empty %}
                                    <li class="list-group-item text-muted">Нет типов</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- Категории -->
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-light">
                            <strong>Категории</strong>
                        </div>
                        <div class="card-body">
                            <form method="post" class="mb-3">
                                {% csrf_token %}
                                {{ category_form.name }}
                                {{ category_form.type }}
                                <input type="hidden" name="form_type" value="category">
                                <button class="btn btn-success btn-sm">Добавить</button>
                            </form>
                            <ul class="list-group">
                                {% for c in categories %}
                                    <li class="list-group-item">
                                        {{ c.name }} <small class="text-muted">({{ c.type.name }})</small>
                                    </li>
                                {% empty %}
                                    <li class="list-group-item text-muted">Нет категорий</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
                <!-- Подкатегории -->
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header bg-light">
                            <strong>Подкатегории</strong>
                        </div>
                        <div class="card-body">
                            <form method="post" class="mb-3">
                                {% csrf_token %}
                                {{ subcategory_form.name }}
                                {{ subcategory_form.category }}
                                <input type="hidden" name="form_type" value="subcategory">
                                <button class="btn btn-success btn-sm">Добавить</button>
                            </form>
                            <ul class="list-group">
                                {% for sc in subcategories %}
                                    <li class="list-group-item">
                                        {{ sc.name }} <small class="text-muted">({{ sc.category.name }})</small>
                                    </li>
                                {% empty %}
                                    <li class="list-group-item text-muted">Нет подкатегорий</li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
